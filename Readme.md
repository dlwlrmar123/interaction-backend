# **交友互动系统**

项目简介

基于Vue3 + SpringBoot2的移动端和PC端网站，实现按标签检索用户、推荐相似用户、组队等功能。

技术选型

前端

- Vue 3
- Vant UI 组件库
- Vite 脚手架
- Axios 请求库

后端

- Java SpringBoot 2.7.x 框架
- MySQL 数据库
- MyBatis-Plus
- MyBatis X 自动生成
- Redis 缓存（Spring Data Redis 等多种实现方式）
- Redisson 分布式锁
- Easy Excel 数据导入
- Spring Scheduler 定时任务
- Swagger + Knife4j 接口文档
- Gson：JSON 序列化库
- 相似度匹配算法

组队功能开发

#### ###### **部分功能（需求分析）**


##### 创建队伍

用户可以 **创建** 一个队伍，设置队伍的人数、队伍名称（标题）、描述、超时时间 

队长、剩余的人数

聊天（√）

公开 或 private 或加密

信息流中不展示已过期的队伍

1. 请求参数是否为空？
2. 是否登录，未登录不允许创建
3. 校验信息

1. 1. 队伍人数 > 1 且 <= 20
   2. 队伍标题 <= 20
   3. 描述 <= 512
   4. status 是否公开（int）不传默认为 0（公开）
   5. 如果 status 是加密状态，一定要有密码，且密码 <= 32
   6. 超时时间 > 当前时间
   7. 校验用户最多创建 5 个队伍

1. 插入队伍信息到队伍表
2. 插入用户 => 队伍关系到关系表


### 查询队伍列表***

分页展示队伍列表，根据名称、最大人数等搜索队伍，信息流中不展示已过期的队伍
1. 从请求参数中取出队伍名称等查询条件，如果存在则作为查询条件
2. 不展示已过期的队伍（根据过期时间筛选）
3. 可以通过某个关键词同时对名称和描述查询
4. 只有管理员才能查看加密还有非公开的房间
5. 关联查询已加入队伍的用户信息
6. 关联查询已加入队伍的用户信息



## 修改队伍信息

1. 判断请求参数是否为空
2. 查询队伍是否存在
3. 只有管理员或者队伍的创建者可以修改
4. 如果用户传入的新值和老值一致，就不用 update 了
5. **如果队伍状态改为加密，必须要有密码**
6. 更新成功


## 用户可以加入队伍

其他人、未满、未过期，允许加入多个队伍，但是要有个上限 

1. 用户最多加入 5 个队伍
2. 队伍必须存在，只能加入未满、未过期的队伍
3. 不能加入自己的队伍，不能重复加入已加入的队伍（幂等性）
4. 禁止加入私有的队伍
5. 如果加入的队伍是加密的，必须密码匹配才可以
6. 新增队伍 - 用户关联信息


## 用户可以退出队伍

请求参数：队伍 id

1. 校验请求参数 

2. 校验队伍是否存在 

3. 校验我是否已加入队伍 

4. **如果队伍** （判断队伍是否存在）

    **a.  只剩一人，队伍解散** 

    **b.  还有其他人（>=2）** 
         i.    如果是队长退出队伍，权限转移给第二早加入的用户 —— 先来后到 

         ii. 非队长，自己退出队伍即可

**注：**公共逻辑——移除要退出队伍的队伍用户信息


## 队长可以解散队伍

请求参数：队伍 id

业务流程：

1. 校验请求参数
2. 校验队伍是否存在
3. 校验你是不是队伍的队长
4. 移除所有加入队伍的关联信息
5. 删除队伍


### 队伍操作按钮

加入队伍： 仅非队伍创建人、且未加入队伍的人可见

更新队伍：仅创建人可见

解散队伍：仅创建人可见

退出队伍：创建人不可见，仅已加入队伍的人可见



## **后续功能补充：**

* 短信登录

这一块我们会使用redis共享session来实现

* 附近的用户

我们利用Redis的GEOHash来完成对于地理坐标的操作

* 用户签到

使用Redis的BitMap数据统计功能

* 好友关注

基于Set集合的关注、取消关注，共同关注等等功能

* 发帖

基于List来完成点赞列表的操作，同时基于SortedSet来完成点赞的排行榜功能









